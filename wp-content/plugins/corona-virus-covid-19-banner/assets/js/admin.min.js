function update_display(){var a=$("[name=orchestrated_corona_virus_banner_enabled]"),b=$("[name=orchestrated_corona_virus_banner_allow_close]:checked"),c=$("#ocvb-container"),d=$("#ocvb-container #ocvb-body"),e=$("#ocvb-container-notice-text "+display.title_header_size),f=$("#ocvb-container-notice-text p"),g=$("#ocvb-container-notice-link"),h=$("#ocvb-container-notice-link a"),i=$("#ocvb-container #ocvb-container-close-button"),j=$("[data-preview-enabled=true]"),k=$("[data-preview-enabled=false]");switch(display.enabled?(a.val(!0),c.removeClass("preview-disabled"),j.show(),k.hide(),$(".display-required").show(),ocvb_show_display_required()):(a.val(!1),c.addClass("preview-disabled"),j.hide(),k.show(),display.display_type="none",ocvb_hide_display_required()),display.display_type){case"none":$(".display-type-banner-required").hide();break;case"banner":$(".display-type-banner-required").show();break;case"overlay":$(".display-type-banner-required").hide();break;case"leaderboard":$(".display-type-banner-required").show()}switch(("banner"==display.display_type||"leaderboard"==display.display_type)&&"true"==b.val()||"overlay"==display.display_type?i.show():i.hide(),$(".option-link-url").hide(),$(".option-link-text").hide(),display.link_type){case"none":$(".option-link-url").hide(),$(".option-link-text").hide(),g.hide();break;case"ext":$(".option-link-url").show(),$(".option-link-text").show(),g.show(),h.attr("href",display.external_link);break;default:parseInt(display.link_type)?($(".option-link-url").hide(),$(".option-link-text").show(),g.show()):($(".option-link-url").hide(),$(".option-link-text").hide(),g.show(),h.attr("href",display.external_link))}$("#ocvb-container-notice-text h1, #ocvb-container-notice-text h2, #ocvb-container-notice-text h3, #ocvb-container-notice-text h4, #ocvb-container-notice-text h5, #ocvb-container-notice-text h6").replaceWith(function(){return jQuery("<"+display.title_header_size+"/>",{html:jQuery(this).html()})}),e=$("#ocvb-container-notice-text "+display.title_header_size),e.html(display.title),f.html(display.message),c.css({color:display.foreground_color,"text-align":display.alignment}),e.css({color:display.foreground_color,"text-align":display.alignment}),f.css({color:display.foreground_color,"text-align":display.alignment}),g.css({color:display.foreground_color,"text-align":display.alignment}),d.css("background-color",display.background_color),h.text(display.link_text),c.attr({"data-allow-close":display.allow_close,"data-message-alignment":display.alignment})}function ocvb_show_display_required(){$(".display-required").css({opacity:1,"pointer-events":"inherit"}),$("[name=orchestrated_corona_virus_banner_message_title], [name=orchestrated_corona_virus_banner_message_text], [name=orchestrated_corona_virus_banner_foreground_color], [name=orchestrated_corona_virus_banner_background_color]").attr("required",""),$(".display-required").find("select").attr("readonly",null),$(".display-required").find("input").attr("readonly",null),$(".display-required").find("textarea").attr("readonly",null)}function ocvb_hide_display_required(){$(".display-required").css({opacity:.4,"pointer-events":"none"}),$("[name=orchestrated_corona_virus_banner_message_title], [name=orchestrated_corona_virus_banner_message_text], [name=orchestrated_corona_virus_banner_foreground_color], [name=orchestrated_corona_virus_banner_background_color]").attr("required",null),$(".display-required").find("select").attr("readonly","readonly"),$(".display-required").find("input").attr("readonly","readonly"),$(".display-required").find("textarea").attr("readonly","readonly")}function ocvb_display_view_changed(a){var b=$(a.target).data("selection"),c=$("[name=orchestrated_corona_virus_banner_display_type]");switch($(".settings-image-option .container").removeClass("selected"),$("[data-selection="+b+"]").find(".container").addClass("selected"),b){case"none":display.enabled=!1,display.display_type="none";break;case"banner":display.enabled=!0,display.display_type="banner";break;case"overlay":display.enabled=!0,display.display_type="overlay";break;case"leaderboard":display.enabled=!0,display.display_type="leaderboard"}c.val(display.display_type),$(".display-type-status").text($("[data-display-type-caption="+display.display_type+"]").text()),update_display()}function ocvb_enabled_changed(a){display.enabled=a.target.checked,update_display()}function ocvb_allow_close_changed(a){display.allow_close="true"==a.target.value,update_display()}function ocvb_allow_close_expiry_changed(a){display.allow_close_expiry=ocvb_filter_text(a.target.value),update_display()}function ocvb_display_type_changed(a){display.display_type=ocvb_filter_text(a.target.value),update_display()}function ocvb_title_changed(a){display.title=ocvb_filter_text(a.target.value),update_display()}function ocvb_title_header_size_changed(a){display.title_header_size=ocvb_filter_text(a.target.value),update_display()}function ocvb_message_changed(a){display.message=ocvb_filter_text(a.target.value),update_display()}function ocvb_internal_alignment_changed(a){display.alignment=ocvb_filter_text(a.target.value),update_display()}function ocvb_internal_link_changed(a){display.link_type=ocvb_filter_text(a.target.value),update_display()}function ocvb_external_link_changed(a){display.external_link=ocvb_filter_text(a.target.value),update_display()}function ocvb_link_text_changed(a){display.link_text=ocvb_filter_text(a.target.value),update_display()}function ocvb_foreground_color_changed(a){display.foreground_color=ocvb_filter_text(a.target.value),update_display()}function ocvb_background_color_changed(a){display.background_color=ocvb_filter_text(a.target.value),update_display()}function ocvb_data_country_changed(a){var b=jQuery("#ocvb-admin-container").data("admin-url"),c=a.target.value.split("|");display.data_country_slug=c[0],display.data_country_label=c[1],jQuery.ajax({type:"POST",url:b,dataType:"json",data:{action:"get_data_for_country",data_country_slug:display.data_country_slug,data_country_label:display.data_country_label},error:function(){},success:function(a){""==a.country_slug?jQuery(".ocvb-shortcode-preview").addClass("inactive"):jQuery(".ocvb-shortcode-preview").removeClass("inactive"),display.data_country_confirmed=a.confirmed,display.data_country_recovered=a.recovered,display.data_country_deaths=a.deaths,display.data_country_slug=a.country_slug,display.data_country_label=a.country_label?a.country_label:"",display.data_last_updated=a.last_updated},complete:function(){jQuery(".ocvb-shortcode-country").text(unescape(display.data_country_label)),jQuery(".ocvb-shortcode-stats-confirmed .ocvb-shortcode-stats-value").text(ocvb_number_formatted(display.data_country_confirmed)),jQuery("#data_country_confirmed").val(display.data_country_confirmed),jQuery(".ocvb-shortcode-stats-recovered .ocvb-shortcode-stats-value").text(ocvb_number_formatted(display.data_country_recovered)),jQuery("#data_country_recovered").val(display.data_country_recovered),jQuery(".ocvb-shortcode-stats-deaths .ocvb-shortcode-stats-value").text(ocvb_number_formatted(display.data_country_deaths)),jQuery("#data_country_deaths").val(display.data_country_deaths),jQuery(".last-run-date .data-label, .ocvb-shortcode-last-run-date .data-label").text(display.data_last_updated)}})}function ocvb_number_formatted(a){var b=a.toString().split(".");return b[0]=b[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),b.join(".")}function ocvb_filter_text(a){return a.replace(/<.*?>/g,"")}jQuery(document).ready(function(a){a(document).on("click",".settings-image-option",ocvb_display_view_changed),a(document).on("change","[name=orchestrated_corona_virus_banner_enabled]",ocvb_enabled_changed),a(document).on("change","[name=orchestrated_corona_virus_banner_allow_close]",ocvb_allow_close_changed),a(document).on("change","[name=orchestrated_corona_virus_banner_allow_close_expiry]",ocvb_allow_close_expiry_changed),a(document).on("change","[name=orchestrated_corona_virus_banner_display_type]",ocvb_display_type_changed),a(document).on("change, keyup","[name=orchestrated_corona_virus_banner_message_title]",ocvb_title_changed),a(document).on("change","[name=orchestrated_corona_virus_banner_message_title_header_size]",ocvb_title_header_size_changed),a(document).on("change, keyup","[name=orchestrated_corona_virus_banner_message_text]",ocvb_message_changed),a(document).on("change","[name=orchestrated_corona_virus_banner_message_alignment]",ocvb_internal_alignment_changed),a(document).on("change","[name=orchestrated_corona_virus_banner_internal_link]",ocvb_internal_link_changed),a(document).on("change, keyup","[name=orchestrated_corona_virus_banner_external_link]",ocvb_external_link_changed),a(document).on("change, keyup","[name=orchestrated_corona_virus_banner_link_text]",ocvb_link_text_changed),a(document).on("change","[name=orchestrated_corona_virus_banner_foreground_color]",ocvb_foreground_color_changed),a(document).on("change","[name=orchestrated_corona_virus_banner_background_color]",ocvb_background_color_changed),a(document).on("change","[name=orchestrated_corona_virus_banner_data_country]",ocvb_data_country_changed),a("[name=orchestrated_corona_virus_banner_enabled], [name=orchestrated_corona_virus_banner_allow_close], [name=orchestrated_corona_virus_banner_allow_close_expiry], [name=orchestrated_corona_virus_banner_display_type], [name=orchestrated_corona_virus_banner_message_alignment], [name=orchestrated_corona_virus_banner_internal_link], [name=orchestrated_corona_virus_banner_data_country]").trigger("change"),a("[name=orchestrated_corona_virus_banner_link_text], [name=orchestrated_corona_virus_banner_message_title], [name=orchestrated_corona_virus_banner_message_text], [name=orchestrated_corona_virus_banner_external_link], [name=orchestrated_corona_virus_banner_foreground_color], [name=orchestrated_corona_virus_banner_background_color]").trigger("keyup");var b=a("[name=orchestrated_corona_virus_banner_display_type]").val();a(".settings-image-option .container").removeClass("selected"),a(".settings-image-option-"+b).find(".container").addClass("selected"),a(".settings-image-option-"+b).trigger("click"),a(document).foundation()});var $=jQuery,display={enabled:!1,allow_close:!1,allow_close_expiry:2,display_type:"none",title:"",title_header_size:"h4",message:"",alignment:"center",internal_link:"",external_link:"",link_text:"",foreground_color:"",background_color:"",data_country_slug:"canada",data_country_label:"Canada",data_country_confirmed:0,data_country_recovered:0,data_country_deaths:0,data_last_updated:"just now"};